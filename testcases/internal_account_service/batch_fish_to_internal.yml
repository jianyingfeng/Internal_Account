- config:
    name: 将fishId转化为内部账号id
    base_url: ${ENV(internal_account_service_host)}

- test:
    name: fishIds长度为1（fishId对应内部账号关系存在）
    request:
        method: POST
        url: /accounts/convert/ids/fish-to-internal
        json:
            fish_ids: ['${internal_source_user_fish_id()}']
    validate:
        - eq: [status_code, 200]
        - length_equals: [content, 1]
        - eq: [content.0.fish_id, '${internal_source_user_fish_id()}']
        - eq: [content.0.internal_id, '${internal_source_user_id()}']


- test:
    name: fishIds长度为0(空数组)
    request:
        method: POST
        url: /accounts/convert/ids/fish-to-internal
        json:
            fish_ids: []
    validate:
        - eq: [status_code, 400]