- config:
    name: 检查邮箱是否已注册
    base_url: ${internal_account_service_host()}
    variables:
        - unexist_internal_account_email: abc@qq.com

- test:
    name: email已注册
    request:
        method: GET
        url: /accounts/email/checked?email=${internal_source_user_email()}
    validate:
        - eq: [status_code, 200]
        - eq: [content.existed, true]

- test:
    name: email未注册
    request:
        method: GET
        url: /accounts/email/checked?email=$unexist_internal_account_email
    validate:
        - eq: [status_code, 200]
        - eq: [content.existed, false]

- test:
    name: email不传递
    request:
        method: GET
        url: /accounts/email/checked
    validate:
        - eq: [status_code, 400]