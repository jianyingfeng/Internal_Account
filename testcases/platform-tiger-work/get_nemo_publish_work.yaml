- config:
    name: 批量获取已发布NEMO作品
    base_url: ${platform_tiger_api_host()}
    variables:
        - user_id: 2966847
        - unexsit_user_id: 1111
        - unpermision_order_by: "created_time"

- test:
    name: 未登录-正常获取
    request:
        method: GET
        url: /works/nemo/list?user_id=${source_user_id()}&order_by=publish_time
    validate:
        - eq: [status_code,200]
        # - length_equals: [content.0, 7]
        # - ne: [content.0.publish_time,0]

- test:
    name: 未登录-不传order_by字段
    request:
        method: GET
        url: /works/nemo/list?user_id=${source_user_id()}
    validate:
        - eq: [status_code, 400]
        - eq: [content.error_code, A_5]

- test:
    name: 不传user_id，获取成功
    request: 
        method: GET
        url: /works/nemo/list?order_by=publish_time
    validate:
        - eq: [status_code, 200]
        # - length_equals: [content.0, 7]
        # - ne: [content.0.publish_time, 0]

# - test:
#     name: limit字段<5
#     request: 
#         method: GET
#         url: /works/nemo/list?user_id=$user_id&order_by=publish_time?limit=0
#     validate:
#         - eq: [status_code,400]
#         - eq: [content.error_code,A_5]

# - test:
#     name: user_id不存在
#     request:
#         method: GET
#         url: /works/nemo/list?user_id=$unexsit_user_id&order_by=publish_time
#     validate:
#         - eq: [status_code,200]
#         - type_match: [content,list]
#         - length_equals: [content,0]

# - test:
#     name: order_by字段传created_time
#     request:
#         method: GET
#         url: /works/nemo/list?order_by=$unpermision_order_by
#     validate:
#         - eq: [status_code,400]
#         - eq: [content.error_code,A_5]

# - test:
#     name: 未登录-order_type字段不存在
#     request:
#         method: GET
#         url: /works/nemo/list?order_by=$unpermision_order_by?order_type=1
#     validate:
#         - eq: [status_code,400]
#         - eq: [content.error_code,A_5]

# - test:
#     name: order_type为ASC
#     request:
#         method: GET
#         url: /works/nemo/list?order_by=publish_time&order_type=ASC
#     extract:
#         - length: content.1.publish_time
#     validate:
#         - eq: [status_code,200]
#         - le: [content.0.publish_time,$length]


# - test:
#     name: order_type为DESC
#     request:
#         method: GET
#         url: /works/nemo/list?order_by=publish_time&order_type=DESC
#     extract:
#         - length: content.1.publish_time
#     validate:
#         - eq: [status_code,200]
#         - gt: [content.0.publish_time,$length]