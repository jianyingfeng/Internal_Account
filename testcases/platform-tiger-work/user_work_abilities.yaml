- config:
    name: 根据user_id获取作品列表的能力
    request:
        base_url: $platform_tiger_api_host
        url: /works/abilities/batch
        method: PUT
        headers:
            Content-Type: $content_type
    variables:
        - wrong_type_work_ids: '{}'
        - unexist_work_id: 100

- test:
    name: 用户id存在-work_ids为用户已发布ide作品
    request:
        json:
          user_id: $source_user_id
          work_ids: [$source_user_ide_published_work_id]
    validate:
        - eq: [status_code, 200]
        - eq: [content.0.work_id, $source_user_ide_published_work_id]
        - contains: [content.0, is_liked]
- test:
    name: 用户id存在-work_ids为用户未发布ide作品
    request:
        json:
          user_id: $source_user_id
          work_ids: [$source_user_ide_unpublish_work_id]
    validate:
        - eq: [status_code, 200]
        - eq: [content.0.work_id, $source_user_ide_unpublish_work_id]
        - contains: [content.0, is_liked]
- test:
    name: 用户id存在-work_ids为用户临时删除ide作品
    request:
        json:
          user_id: $source_user_id
          work_ids: [$source_user_ide_deleted_temporarily_work_id]
    validate:
        - eq: [status_code, 200]
        - eq: [content.0.work_id, $source_user_ide_deleted_temporarily_work_id]
        - contains: [content.0, is_liked]
- test:
    name: 用户id存在-work_ids为用户永久删除ide作品
    request:
        json:
          user_id: $source_user_id
          work_ids: [$source_user_ide_deleted_permanently_work_id]
    validate:
        - eq: [status_code, 200]
        - eq: [content.0.work_id, $source_user_ide_deleted_permanently_work_id]
        - contains: [content.0, is_liked]
- test:
    name: 用户id存在-work_ids为不存在的作品
    request:
        json:
          user_id: $source_user_id
          work_ids: [$unexist_work_id]
    validate:
        - eq: [status_code, 200]
        - eq: [content.0.work_id, $unexist_work_id]
        - contains: [content.0, is_liked]
- test:
    name: 用户id存在-work_ids格式错误
    request:
        json:
          user_id: $source_user_id
          work_ids: $wrong_type_work_ids
    validate:
        - eq: [status_code, 400]
        - eq: [content.error_code, A_5]
- test:
    name: 用户id存在-work_ids不传递
    request:
        json:
          user_id: $source_user_id
          work_ids: $wrong_type_work_ids
    validate:
        - eq: [status_code, 400]
        - eq: [content.error_code, A_5]
- test:
    name: 用户id不传递-work_ids为已发布ide作品
    request:
        json:
            work_ids: $source_user_ide_published_work_id
    validate:
        - eq: [status_code, 400]
        - eq: [content.error_code, A_5]
- test:
    name: 请求体为空
    validate:
        - eq: [status_code, 400]
        - eq: [content.error_code, A_5]