- config:
    name: 获取某段时间内的作品数
    request:
        base_url: $platform_tiger_api_host
        method: GET
        headers:
            Content-Type: $content_type
    variables:
        - start_time_date: '2018-11-22'
        - end_time_date: '2018-11-23'

- test:
    name: 传递start_time，传递end_time
    variables:
        - start_time: ${get_timeslot($start_time_date)}
        - end_time: ${get_timeslot($end_time_date)}
    request:
        url: /works/statistics/count?start_time=$start_time&end_time=$end_time
    validate:
        - eq: [status_code, 200]
        - contains: [content, n_works]
- test:
    name: 传递start_time，不传递end_time
    variables:
        - start_time: ${get_timeslot($start_time_date)}
    request:
        url: /works/statistics/count?start_time=$start_time
    validate:
        - eq: [status_code, 400]
        - contains: [content.error_code, A_5]
- test:
    name: 不传递start_time，传递end_time
    variables:
        - end_time: ${get_timeslot($end_time_date)}
    request:
        url: /works/statistics/count?end_time=$end_time
    validate:
        - eq: [status_code, 400]
        - contains: [content.error_code, A_5]
- test:
    name: 不传递参数
    request:
        url: /works/statistics/count
    validate:
        - eq: [status_code, 400]
        - contains: [content.error_code, A_5]