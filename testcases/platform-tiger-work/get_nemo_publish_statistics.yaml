- config:
    name: 获取用户已发布或未发布作品总数
    base_url: ${platform_tiger_api_host()}
    variables:
        - unexist_user_id: 111

- test:
    name: 用户存在-传入is_published字段
    request:
        method: GET
        url: /works/nemo/statistics?user_id=${source_user_id()}&is_published=1
    validate:
        - eq: [status_code, 200]
        - contains: [content, n_works]

- test:
    name: 传入不存在的用户
    request:
        method: GET
        url: /works/nemo/statistics?user_id=$unexist_user_id&is_published=1
    validate:
        - eq: [status_code, 200]
        - eq: [content.n_works, 0]

- test:
    name: 不传publish字段
    request:
        method: GET
        url: /works/nemo/statistics?user_id=${source_user_id()}
    validate:
        - eq: [status_code, 400]
        - eq: [content.error_code, A_5]

- test:
    name: is_published字段传0报错
    request: 
        method: GET
        url: /works/nemo/statistics?user_id=${source_user_id()}&is_published=0
    validate:
        - eq: [status_code, 400]
        - eq: [content.error_code, A_5]

- test:
    name: 不传user_id
    request: 
        method: GET
        url: /works/nemo/statistics?is_published=1
    validate:
        - eq: [status_code, 400]
        - eq: [content.error_code, A_5]

