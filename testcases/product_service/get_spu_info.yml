- config:
    name: 获取单个SPU信息
    base_url: ${product_service_host()}
    variables:
        - existed_category_id: 1
        - existed_department_id: 1

- test:
    name: 准备工作：创建商品SPU
    api: api/product_service/create_spu.yml
    variables:
        - category_id: $existed_category_id
        - department_id: $existed_department_id
        - type: VIRTUAL
        - title: 测试创建商品
    validate:
        - eq: [status_code, 200]
    extract:
        - created_spu_status: status_code
        - created_spu_number: content

- test:
    name: spu_number存在
    skipUnless: ${eval_equal($created_spu_status, 200)}
    request:
        method: GET
        url: /spu/$created_spu_number
    validate:
        - eq: [status_code, 200]
        - length_equals: [content, 19]
