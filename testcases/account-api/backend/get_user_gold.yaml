- config:
    name: 获取用户金币数
    base_url: ${tiger_api_host()}

- test: 
    name: 用户未登录
    request:
        method: GET
        url: /api/user/gold
    validate:
        - eq: [status_code , 200]
        - eq: [content.code, 2002]
        - eq: [content.msg, 用户未登陆]
        - length_equals: [content, 2]

# - test:
#     name: 获取用户登录Cookies
#     api: api/account/account_login.yaml
#     variables:
#         - identity: ${source_user_username()}
#         - password: ${source_user_password()}
#     validate:
#         - eq: [status_code, 200]
#     extract:
#         - source_user_login_cookies: cookies

# # 使用token不行，需要使用Cookies: master-v1-codemao
# - test: 
#     name: 用户已登录
#     request:
#         method: GET
#         url: /api/user/gold
#         headers:
#             Cookie: ${str(source_user_login_cookies)}
#     validate:
#         - eq: [status_code , 200]
#         - eq: [content, gold]
#         - length_equals: [content, 1]