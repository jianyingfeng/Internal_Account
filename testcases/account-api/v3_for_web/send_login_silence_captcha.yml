- config:
    name: 发送登录验证码（静默注册版本）
    base_url: ${tiger_api_host()}
    variables:
        - unregister_phone_number: ${test_phone_number()}
        - wrong_captcha: '123456'

- test:
    name: 手机号未注册
    skipUnless: ${is_dev_or_test()}
    setup_hooks: 
        - ${clear_phone_number($unregister_phone_number)}
    api: api/account/v3_for_web/send_login_silence_captcha.yaml
    variables:
        - phone_number: $unregister_phone_number
    validate:
        - eq: [status_code, 204]

# 手机号已注册
- test:
    name: 准备：注册手机号
    skipUnless: ${is_dev_or_test()}
    api: api/platform-account/register_phone_number.yaml
    variables:
        - phone_number: $unregister_phone_number
    validte:
        - eq: [status_code, 200]

- test:
    name: 手机号已注册
    skipUnless: ${is_dev_or_test()}
    api: api/account/v3_for_web/send_login_silence_captcha.yaml
    variables:
        - phone_number: $unregister_phone_number
    validate:
        - eq: [status_code, 204]
    teardown_hooks:
        - ${clear_phone_number($unregister_phone_number)}