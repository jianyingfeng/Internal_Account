- config:
    name: 购买作品（codemao-backend）
    request:
        base_url: $tiger_api_host
        method: POST
        headers:
            Content-Type: $content_type
    variables:
        - unexist_work_id: 100
        - wrong_type_work_id: aaa

- test:
    name: 未登录-已发布IDE作品(可购买)
    request:
        url: /api/work/fork/$source_user_ide_published_work_id
    validate:
        - eq: [status_code, 200]
        - eq: [content.code, 2002]
        - eq: [content.msg, 用户未登陆]
- test:
    name: 已登录-他人已发布IDE作品(可购买)
    request:
        url: /api/work/fork/$target_user_ide_published_work_id
        headers:
            Authorization: $source_user_login_token
    validate:
        - eq: [status_code, 200]
        - eq: [content.code, 200]
        - eq: [content.msg, 成功]
        - contains: [content.data, workId]
- test:
    name: 已登录-他人已发布IDE作品(不可购买)
    request:
        url: /api/work/fork/$target_user_ide_published_unfork_work_id
        headers:
            Authorization: $source_user_login_token
    validate:
        - eq: [status_code, 200]
        - eq: [content.code, 500]
- test:
    name: 已登录-个人已发布IDE作品(可购买)
    request:
        url: /api/work/fork/$source_user_ide_published_work_id 
        headers:
            Authorization: $source_user_login_token
    validate:
        - eq: [status_code, 200]
        - eq: [content.code, 500]
- test:
    name: 已登录-不存在的作品id
    request:
        url: /api/work/fork/$unexist_work_id 
        headers:
            Authorization: $source_user_login_token
    validate:
        - eq: [status_code, 200]
        - eq: [content.code, 500]
- test:
    name: 已登录-格式错误的作品id
    request:
        url: /api/work/fork/$wrong_type_work_id 
        headers:
            Authorization: $source_user_login_token
    validate:
        - eq: [status_code, 400]
        - eq: [content.error_code, A_5]